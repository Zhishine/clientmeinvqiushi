package com.news.qiushi;

import com.umeng.socialize.controller.RequestType;
import com.umeng.socialize.controller.UMServiceFactory;
import com.umeng.socialize.controller.UMSocialService;
import com.umeng.socialize.view.ActionBarView;

import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.view.View;
import android.view.View.OnClickListener;
import android.view.ViewGroup;
import android.webkit.WebView;
import android.widget.ImageView;
import android.widget.RelativeLayout;
import android.widget.RelativeLayout.LayoutParams;

public class WebViewActivity extends Activity implements OnClickListener {
    int m_id=0;
	@Override
	protected void onCreate(Bundle savedInstanceState) {
		// TODO Auto-generated method stub
		super.onCreate(savedInstanceState);
		setContentView(R.layout.webview);
		WebView web=(WebView)findViewById(R.id.webview);
		 Intent intent = getIntent();
         String url  = intent.getStringExtra("url");
         m_id=intent.getIntExtra("id", 0);
		web.loadUrl(url);
		ImageView back=(ImageView) findViewById(R.id.back);
		back.setOnClickListener(this);
		ImageView share=(ImageView) findViewById(R.id.share);
		share.setOnClickListener(this); 
		ViewGroup parent = (ViewGroup)findViewById(R.id.root);
		//创建ActionBar des参数是ActionBar的唯一标识，请确保不为空
		ActionBarView socializeActionBar = new ActionBarView(this,"meinvqiushi.news."+m_id);

		RelativeLayout.LayoutParams layoutParams = new RelativeLayout.LayoutParams(LayoutParams.WRAP_CONTENT,LayoutParams.WRAP_CONTENT);
		layoutParams.addRule(RelativeLayout.ALIGN_PARENT_BOTTOM, RelativeLayout.TRUE);
		socializeActionBar.setLayoutParams(layoutParams);
		//添加ActionBar
		parent.addView(socializeActionBar);
	}

	@Override
	public void onClick(View view) {
		// TODO Auto-generated method stub
		if(view.getId()==R.id.back){
			this.finish();
		}
		else if(view.getId()==R.id.share){
		
			         /**
			         * 参数说明
			         * descriptor UMSocialService的标识，你可能在一个Acitvity中使用多个UMSocialService用于区分各个子版块,
			         *           此时建议使用模块名称;如果只使用一个，建议使用相关Acitvity的class name作为参数。
			         * type     申明UMSocialService的权限.社会化组件统一为：RequestType.SOCIAL
			         */
			         UMSocialService controller = UMServiceFactory.getUMSocialService("meinvqiushi.news."+m_id, RequestType.SOCIAL);
			        /**
			        * 参数说明
			        * arg0  上下文，传入当前Activity的实例即可
			        * arg1  评论时是否需要登录，取值false将以游客的身份进行评论
			        */
			
			        controller.openComment(this, false);
			
		}
	}

}
